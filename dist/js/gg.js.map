{"version":3,"file":"gg.js","sources":["../../src/Card.js","../../index.js"],"sourcesContent":["export class GCard {\n    /**\n     * @param {Object} anchor the element to point to\n     * @param {String} position the position of the card, relative to anchor\n     * @param {String} content the text of the card\n     * @param {Object} options the options\n     */\n    constructor(anchor, position, content, options = {}) {\n        const defaults = {\n            showPrev: true,\n            canFinish: true,\n        };\n\n        this.anchor = anchor;\n        this.position = position;\n        this.content = content;\n\n        this.options = Object.assign({}, defaults, options);\n\n        this.element = this.createElement();\n    }\n\n    /**\n     * Gets the DOM element representing the card.\n     */\n    getElement() {\n        return this.element;\n    }\n\n    /**\n     * Creates the DOM element representing the card.\n     */\n    createElement() {\n        const card = document.createElement('div');\n        card.className = 'gg-card';\n\n        const content = document.createElement('div');\n        content.className = 'gg-card-content';\n        content.innerHTML = this.content;\n\n        const footer = document.createElement('div');\n        footer.className = 'gg-card-footer';\n\n        const footerLeft = document.createElement('div');\n        footerLeft.className = 'gg-card-footer-left';\n\n        const footerCenter = document.createElement('div');\n        footerCenter.className = 'gg-card-footer-center';\n\n        const footerRight = document.createElement('div');\n        footerRight.className = 'gg-card-footer-right';\n\n        footer.append(footerLeft);\n        footer.append(footerCenter);\n        footer.append(footerRight);\n\n        if (this.options.showPrev) {\n            const prev = document.createElement('a');\n            prev.setAttribute('role', 'button');\n            prev.textContent = '<< prev';\n            prev.addEventListener('click', this.options.onPrev, false);\n\n            footerLeft.append(prev);\n        }\n\n        if (this.options.canFinish) {\n            const finish = document.createElement('a');\n            finish.setAttribute('role', 'button');\n            finish.className = 'gg-card-action-finish';\n            finish.textContent = 'end it now';\n\n            finish.addEventListener('click', this.options.onFinish, false);\n\n            footerCenter.append(finish);\n        }\n\n        const next = document.createElement('a');\n        next.setAttribute('role', 'button');\n        next.className = 'gg-card-action-next';\n        next.textContent = 'Got it!';\n        next.addEventListener('click', this.options.onNext, false);\n\n        footerRight.append(next);\n\n        const arrow = document.createElement('div');\n        arrow.className = 'gg-card-arrow';\n\n        card.append(content);\n        card.append(footer);\n        card.append(arrow);\n\n        return card;\n    }\n\n    /**\n     * Gets the coordinates of the anchor in the page.\n     *\n     * @return {Object}\n     */\n    getAnchorCoordinates() {\n        const position = this.anchor.getBoundingClientRect();\n\n        return {\n            top: position.top + window.pageYOffset,\n            left: position.left + window.pageXOffset,\n        };\n    }\n\n    /**\n     * Add classes and styles to positioning the card element.\n     */\n    setCardInPosition() {\n        const anchorCoordinates = this.getAnchorCoordinates();\n\n        switch (this.position) {\n            case 'top':\n            default:\n                this.element.className += ' gg-card-top';\n                this.element.style.left =\n                    anchorCoordinates.left -\n                    this.element.offsetWidth / 2 +\n                    this.anchor.offsetWidth / 2 +\n                    'px';\n                this.element.style.top =\n                    anchorCoordinates.top - this.element.offsetHeight - 15 + 'px';\n                break;\n            case 'right':\n                this.element.className += ' gg-card-right';\n                this.element.style.left =\n                    anchorCoordinates.left + this.anchor.offsetWidth + 15 + 'px';\n                this.element.style.top =\n                    anchorCoordinates.top -\n                    this.element.offsetHeight / 2 +\n                    this.anchor.offsetHeight / 2 +\n                    'px';\n                break;\n            case 'bottom':\n                this.element.className += ' gg-card-bottom';\n                this.element.style.left =\n                    anchorCoordinates.left -\n                    this.element.offsetWidth / 2 +\n                    this.anchor.offsetWidth / 2 +\n                    'px';\n                this.element.style.top =\n                    anchorCoordinates.top + this.anchor.offsetHeight + 15 + 'px';\n                break;\n            case 'left':\n                this.element.className += ' gg-card-left';\n                this.element.style.left =\n                    anchorCoordinates.left - this.element.offsetWidth - 15 + 'px';\n                this.element.style.top =\n                    anchorCoordinates.top -\n                    this.element.offsetHeight / 2 +\n                    this.anchor.offsetHeight / 2 +\n                    'px';\n                break;\n        }\n    }\n}\n","import { GCard } from './src/Card';\n\nexport default class GGuide {\n    /**\n     * @param {object} cards the cards of the guide\n     * @param {object} options the client options\n     *\n     * @return {GGuide}\n     */\n    constructor(cards, options = {}) {\n        const defaults = {\n            firstCard: 0,\n            showPrev: true,\n            canFinish: true,\n        };\n\n        this.options = Object.assign({}, defaults, options);\n\n        this.currentStep =\n            typeof this.options.firstCard === 'string'\n                ? parseInt(this.options.firstCard, 10)\n                : this.options.firstCard;\n\n        this.steps = this.createSteps(cards);\n\n        this.onNext = this.onNext.bind(this);\n        this.onPrev = this.onPrev.bind(this);\n        this.onFinish = this.onFinish.bind(this);\n\n        return this;\n    }\n\n    /**\n     * Next card event callback.\n     */\n    onNext = () => {\n        this.showNext();\n    };\n\n    /**\n     * Prev card event callback.\n     */\n    onPrev = () => {\n        this.showPrev();\n    };\n\n    /**\n     * Finish guide event callback.\n     */\n    onFinish = () => {\n        this.end();\n    };\n\n    /**\n     * Create the steps based on the client's cards.\n     *\n     * @param {Object} cards the card object of the client\n     * @return {Object[]}\n     */\n    createSteps(cards) {\n        const stepList = [];\n\n        for (let i = 0; i < cards.length; i++) {\n            const anchor = this.getAnchor(cards[i].selector);\n\n            if (anchor) {\n                const step = {};\n\n                step.anchor = anchor;\n                step.position = cards[i].position;\n                step.content = cards[i].content;\n\n                step.prev = stepList && stepList.length ? stepList[stepList.length - 1] : null;\n                step.next = null;\n                if (step.prev !== null) {\n                    step.prev.next = step;\n                }\n\n                const cardOptions = typeof cards[i].options !== 'undefined' ? cards[i].options : {};\n\n                const canFinish =\n                    typeof cardOptions.canFinish !== 'undefined' ? cardOptions.canFinish : true;\n\n                const defaults = {\n                    showPrev: this.options.showPrev ? step.prev !== null : false,\n                    canFinish: this.options.canFinish ? canFinish : false,\n                    cardStep: i,\n                    onNext: this.onNext,\n                    onPrev: this.onPrev,\n                    onFinish: this.onFinish,\n                };\n\n                const options = Object.assign({}, defaults, cards[i].options);\n\n                const card = new GCard(step.anchor, step.position, step.content, options);\n                step.card = card;\n\n                stepList.push(step);\n            } else {\n                console.warn(\n                    \"GGuide: The card with selector '\" +\n                        cards[i].selector +\n                        \"' was ignored since no DOM element was found.\"\n                );\n            }\n        }\n\n        return stepList;\n    }\n\n    /**\n     * Starts the guide.\n     *\n     * @return {GGuide}\n     */\n    begin() {\n        this.drawStep(this.steps[this.currentStep]);\n\n        return this;\n    }\n\n    /**\n     * Ends the guide.\n     *\n     * @return {GGuide}\n     */\n    end() {\n        this.removeStep(this.steps[this.currentStep]);\n        this.currentStep = this.options.firstCard;\n\n        if (\n            typeof this.options.onFinish !== 'undefined' &&\n            typeof this.options.onFinish === 'function'\n        ) {\n            this.options.onFinish();\n        }\n\n        return this;\n    }\n\n    /**\n     * Display the next card or end the guide.\n     */\n    showNext() {\n        const currentStep = this.steps[this.currentStep];\n\n        if (this.steps[this.currentStep].next !== null) {\n            const nextStep = (this.currentStep += 1);\n\n            this.removeStep(currentStep);\n            this.drawStep(currentStep.next);\n\n            this.currentStep = nextStep;\n\n            if (\n                typeof this.options.onNext !== 'undefined' &&\n                typeof this.options.onNext === 'function'\n            ) {\n                this.options.onNext(nextStep);\n            }\n\n            if (\n                typeof this.options.onChange !== 'undefined' &&\n                typeof this.options.onChange === 'function'\n            ) {\n                this.options.onChange(nextStep);\n            }\n        } else {\n            this.end();\n        }\n    }\n\n    /**\n     * Display the previous card if apply.\n     */\n    showPrev() {\n        const currentStep = this.steps[this.currentStep];\n\n        if (this.steps[this.currentStep].prev !== null) {\n            const prevStep = (this.currentStep -= 1);\n\n            this.removeStep(currentStep);\n            this.drawStep(currentStep.prev);\n\n            this.currentStep = prevStep;\n\n            if (\n                typeof this.options.onPrev !== 'undefined' &&\n                typeof this.options.onPrev === 'function'\n            ) {\n                this.options.onPrev(prevStep);\n            }\n\n            if (\n                typeof this.options.onChange !== 'undefined' &&\n                typeof this.options.onChange === 'function'\n            ) {\n                this.options.onChange(prevStep);\n            }\n        }\n    }\n\n    /**\n     * Draws the card corresponding to the step.\n     *\n     * @param {Object} step the step that owns the card to draw\n     */\n    drawStep(step) {\n        step.anchor.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center',\n            inline: 'nearest',\n        });\n        document.body.append(step.card.getElement());\n\n        step.card.setCardInPosition();\n    }\n\n    /**\n     * Removes the card corresponding to the step.\n     *\n     * @param {Object} step the step that owns the card to remove\n     */\n    removeStep(step) {\n        step.card.getElement().remove();\n    }\n\n    /**\n     * Select a DOM element based on selector.\n     *\n     * @param {String} selector\n     */\n    getAnchor(selector) {\n        const anchor = document.querySelector(selector);\n\n        if (typeof anchor != 'undefined' && anchor != null) {\n            return anchor;\n        }\n\n        return false;\n    }\n}\n"],"names":["GCard","anchor","position","content","options","defaults","showPrev","canFinish","Object","assign","element","createElement","card","document","className","innerHTML","footer","footerLeft","footerCenter","footerRight","append","prev","setAttribute","textContent","addEventListener","onPrev","finish","onFinish","next","onNext","arrow","getBoundingClientRect","top","window","pageYOffset","left","pageXOffset","anchorCoordinates","getAnchorCoordinates","style","offsetWidth","offsetHeight","GGuide","cards","showNext","end","firstCard","currentStep","parseInt","steps","createSteps","bind","stepList","i","length","getAnchor","selector","step","cardOptions","cardStep","push","console","warn","drawStep","removeStep","nextStep","onChange","prevStep","scrollIntoView","behavior","block","inline","body","getElement","setCardInPosition","remove","querySelector"],"mappings":"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"}